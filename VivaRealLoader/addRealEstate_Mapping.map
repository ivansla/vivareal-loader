<?xml version="1.0" encoding="UTF-8"?><mappingRoot xmlns="http://www.ibm.com/2008/ccl/Mapping" domainID="com.ibm.msl.mapping.xml" domainIDExtension="mb" mainMap="true" targetNamespace="default" version="8.0.5.0" xmlns:map="default">
    <input path="jar:file://!com/ibm/etools/mft/map/xsds/predefined/JsonDomainMsg.xsd" var="var"/>
    <input derivedFrom="MB:JSON_schema_in_swagger_document" path="/vivareal-loader.yaml" var="var1"/>
    <input path="db:routine(/FREEPDB1.dbm,FREEPDB1,IVANSLA,GETADDREALESTATEIDS,REALESTATEID,ADDRESSID,PRICINGINFOID,LINKID)" var="GETADDREALESTATEIDS2"/>
    <input path="jar:file://!com/ibm/msl/mapping/rdb/xsds/dbreturn.xsd" var="var6"/>
    <output path="jar:file://!com/ibm/etools/mft/map/xsds/predefined/JsonDomainMsg.xsd" var="var2"/>
    <output derivedFrom="MB:JSON_schema_in_swagger_document" path="/vivareal-loader.yaml" var="var3"/>
    <output path="db:table(/FREEPDB1.dbm,FREEPDB1,IVANSLA,PRICINGINFO)" var="PRICINGINFO"/>
    <output path="db:routine(/FREEPDB1.dbm,FREEPDB1,IVANSLA,GETADDREALESTATEIDS,REALESTATEID,ADDRESSID,PRICINGINFOID,LINKID)" var="GETADDREALESTATEIDS1"/>
    <output path="db:table(/FREEPDB1.dbm,FREEPDB1,IVANSLA,ADDRESS)" var="ADDRESS1"/>
    <output path="db:table(/FREEPDB1.dbm,FREEPDB1,IVANSLA,LINK)" var="LINK"/>
    <output path="db:table(/FREEPDB1.dbm,FREEPDB1,IVANSLA,REALESTATE)" var="REALESTATE1"/>
    <imports>
        <import kind="esql" namespace="/MappingUtils.esql"/>
    </imports>
    <namespaces>
        <namespace kind="supplement" prefix="io" uri="http://www.ibm.com/iib/msl/json"/>
        <namespace kind="extension" prefix="fn" uri="http://www.w3.org/2005/xpath-functions"/>
        <namespace kind="extension" prefix="MappingUtils" uri="/MappingUtils.esql"/>
    </namespaces>
    <generation engine="xquery"/>
    <mappingDeclaration name="addRealEstate_Mapping">
        <input derivedFrom="MB:JSON_operation_name:addRealEstate" namespace="http://www.ibm.com/iib/msl/json" path="$var/mb:msg(JSON,assembly,JSON,Properties,LocalEnvironment)" var="ComIbmMessageAssembly_JSON">
            <cast derivedFrom="MB:JSON_operation_request" path="$ComIbmMessageAssembly_JSON/JSON/Data/type('anyType')" qualifier="{http://www.ibm.com/iib/msl/json}object_addRealEstate_body" ref="var1" var="anyType"/>
        </input>
        <output namespace="http://www.ibm.com/iib/msl/json" path="$var2/mb:msg(JSON,assembly,JSON,Properties)" var="ComIbmMessageAssembly_JSON1">
            <cast derivedFrom="MB:JSON_operation_response" path="$ComIbmMessageAssembly_JSON1/JSON/Data/type('anyType')" qualifier="{http://www.ibm.com/iib/msl/json}object_addRealEstate_200" ref="var3" var="anyType1"/>
        </output>
        <output path="$PRICINGINFO/db:insert(fn:false(),ID,YEARLYIPTU,PRICE,BUSINESSTYPE,MONTHLYCONDOFEE)" var="dbinsert2"/>
        <output path="$ADDRESS1/db:insert(fn:false(),ID,COUNTRY,ZIPCODE,GEOJSON,CITY,LEVEL,PRECISION,CONFIDENCE,STATEACRONYM,SOURCE,IBGECITYID,ZONE,STREET,LOCATIONID,DISTRICT,NAME,STATE,STREETNUMBER,NEIGHBORHOOD,LONGITUDE,LATITUDE,POISLIST,POIS,VALUABLEZONES)" var="dbinsert3"/>
        <output path="$LINK/db:insert(fn:false(),STREETNUMBER,STATE,CITY,ZONE,NEIGHBORHOOD,STREET,ID,NAME,HREF,REL)" var="dbinsert4"/>
        <output path="$REALESTATE1/db:insert(fn:false(),ID,SOURCEID,DISPLAYADDRESSTYPE,CONTRACTTYPE,USABLEAREAS,CREATEDAT,UNITTYPES,REALESTATEID,PARKINGSPACES,UPDATEDAT,SUITES,BATHROOMS,USAGETYPES,BEDROOMS,BUILDINGS,STATUS,AMENITIES,CONSTRUCTIONSTATUS,DESCRIPTION,TITLE,FLOORS,PROPERTYTYPE,UNITSUBTYPES,CEILINGHEIGHT,LEGACYID,STAMPS,TOTALAREAS,SEARCHABLEAMENITIES,CAPACITYLIMIT,ADDRESSID,LISTINGID)" var="dbinsert5"/>
        <move>
            <input path="$ComIbmMessageAssembly_JSON/Properties"/>
            <output path="$ComIbmMessageAssembly_JSON1/Properties"/>
        </move>
        <task type="info">
            <documentation description="The REST API input data of operation addRealEstate.">This Task is provided to show the location of the REST API input data of operation addRealEstate.
The path and query parameters are provided under "Parameters".
You may need to use these as inputs to your mappings.</documentation>
            <input path="$ComIbmMessageAssembly_JSON/LocalEnvironment/REST/Input"/>
        </task>
        <assign value="200">
            <output path="$ComIbmMessageAssembly_JSON1/JSON/spath('Data',2)/code"/>
        </assign>
        <transaction>
            <rdbcall>
                <output path="$GETADDREALESTATEIDS1/db:routine-call()"/>
            </rdbcall>
            <rdbreturn>
                <input path="$GETADDREALESTATEIDS2/db:routine-return(fn:false(),fn:nilled(),0,1,2,3)" var="dbroutinereturn1"/>
                <input path="$ComIbmMessageAssembly_JSON/JSON/spath('Data',2)" var="Data"/>
                <output path="$dbinsert2/." var="dbinsert6"/>
                <output path="$dbinsert3/." var="dbinsert7"/>
                <output path="$dbinsert5/." var="dbinsert9"/>
                <foreach>
                    <input path="$Data/pricingInfos/Item[1]" var="Item"/>
                    <input auxiliary="true" path="$dbroutinereturn1/." var="dbroutinereturn2"/>
                    <output path="$dbinsert6/."/>
                    <transaction>
                        <insert ref="dbinsert6">
                            <input path="$dbroutinereturn2/." var="dbroutinereturn2"/>
                            <input path="$Item/.[1]" var="Item1"/>
                            <output path="."/>
                            <move>
                                <input path="$dbroutinereturn2/PRICINGINFOID"/>
                                <output path="ID"/>
                            </move>
                            <move>
                                <input path="$Item1/yearlyIptu"/>
                                <output path="YEARLYIPTU"/>
                            </move>
                            <move>
                                <input path="$Item1/price"/>
                                <output path="PRICE"/>
                            </move>
                            <move>
                                <input path="$Item1/businessType"/>
                                <output path="BUSINESSTYPE"/>
                            </move>
                            <move>
                                <input path="$Item1/monthlyCondoFee"/>
                                <output path="MONTHLYCONDOFEE"/>
                            </move>
                        </insert>
                        <return>
                            <input path="$var6/DBInsertReturn"/>
                        </return>
                    </transaction>
                </foreach>
                <transaction>
                    <insert ref="dbinsert7">
                        <input path="$dbroutinereturn1/." var="dbroutinereturn3"/>
                        <input path="$Data/address" var="address"/>
                        <output path="$dbinsert7/."/>
                        <move>
                            <input path="$dbroutinereturn3/ADDRESSID"/>
                            <output path="ID"/>
                        </move>
                        <move automap="true">
                            <input path="$address/country"/>
                            <output path="COUNTRY"/>
                        </move>
                        <move automap="true">
                            <input path="$address/zipCode"/>
                            <output path="ZIPCODE"/>
                        </move>
                        <move automap="true">
                            <input path="$address/geoJson"/>
                            <output path="GEOJSON"/>
                        </move>
                        <move automap="true">
                            <input path="$address/city"/>
                            <output path="CITY"/>
                        </move>
                        <move automap="true">
                            <input path="$address/precision"/>
                            <output path="PRECISION"/>
                        </move>
                        <move automap="true">
                            <input path="$address/confidence"/>
                            <output path="CONFIDENCE"/>
                        </move>
                        <move automap="true">
                            <input path="$address/stateAcronym"/>
                            <output path="STATEACRONYM"/>
                        </move>
                        <function automap="true" ref="concat">
                            <input path="$address/source" var="source"/>
                            <input path="$address/point/source" var="source1"/>
                            <output path="SOURCE"/>
                        </function>
                        <move automap="true">
                            <input path="$address/ibgeCityId"/>
                            <output path="IBGECITYID"/>
                        </move>
                        <move automap="true">
                            <input path="$address/zone"/>
                            <output path="ZONE"/>
                        </move>
                        <move automap="true">
                            <input path="$address/street"/>
                            <output path="STREET"/>
                        </move>
                        <move automap="true">
                            <input path="$address/locationId"/>
                            <output path="LOCATIONID"/>
                        </move>
                        <move automap="true">
                            <input path="$address/district"/>
                            <output path="DISTRICT"/>
                        </move>
                        <move automap="true">
                            <input path="$address/name"/>
                            <output path="NAME"/>
                        </move>
                        <move automap="true">
                            <input path="$address/state"/>
                            <output path="STATE"/>
                        </move>
                        <move automap="true">
                            <input path="$address/streetNumber"/>
                            <output path="STREETNUMBER"/>
                        </move>
                        <move automap="true">
                            <input path="$address/neighborhood"/>
                            <output path="NEIGHBORHOOD"/>
                        </move>
                        <function ref="fn:string-join">
                            <input path="$address/poisList/Item" var="Item16"/>
                            <output path="POISLIST"/>
                            <param name="strings" value="$Item16"/>
                            <param name="separator" value="';'"/>
                        </function>
                        <function ref="fn:string-join">
                            <input path="$address/pois/Item" var="Item17"/>
                            <output path="POIS"/>
                            <param name="strings" value="$Item17"/>
                            <param name="separator" value="';'"/>
                        </function>
                        <function ref="fn:string-join">
                            <input path="$address/valuableZones/Item" var="Item18"/>
                            <output path="VALUABLEZONES"/>
                            <param name="strings" value="$Item18"/>
                            <param name="separator" value="';'"/>
                        </function>
                        <move>
                            <input path="$address/point/lon"/>
                            <output path="LONGITUDE"/>
                        </move>
                        <move>
                            <input path="$address/point/lat"/>
                            <output path="LATITUDE"/>
                        </move>
                    </insert>
                    <return>
                        <input path="$var6/DBInsertReturn"/>
                    </return>
                </transaction>
                <transaction>
                    <insert ref="dbinsert9">
                        <input path="$dbroutinereturn1/." var="dbroutinereturn4"/>
                        <input path="$Data/." var="Data1"/>
                        <output path="$dbinsert9/."/>
                        <move>
                            <input path="$dbroutinereturn4/REALESTATEID"/>
                            <output path="ID"/>
                        </move>
                        <move>
                            <input path="$dbroutinereturn4/ADDRESSID"/>
                            <output path="ADDRESSID"/>
                        </move>
                        <move automap="true">
                            <input path="$dbroutinereturn4/REALESTATEID"/>
                            <output path="REALESTATEID"/>
                        </move>
                        <move automap="true">
                            <input path="$Data1/sourceId"/>
                            <output path="SOURCEID"/>
                        </move>
                        <move automap="true">
                            <input path="$Data1/displayAddressType"/>
                            <output path="DISPLAYADDRESSTYPE"/>
                        </move>
                        <move automap="true">
                            <input path="$Data1/contractType"/>
                            <output path="CONTRACTTYPE"/>
                        </move>
                        <move automap="true">
                            <input path="$Data1/buildings"/>
                            <output path="BUILDINGS"/>
                        </move>
                        <move automap="true">
                            <input path="$Data1/status"/>
                            <output path="STATUS"/>
                        </move>
                        <move automap="true">
                            <input path="$Data1/constructionStatus"/>
                            <output path="CONSTRUCTIONSTATUS"/>
                        </move>
                        <move automap="true">
                            <input path="$Data1/description"/>
                            <output path="DESCRIPTION"/>
                        </move>
                        <move automap="true">
                            <input path="$Data1/title"/>
                            <output path="TITLE"/>
                        </move>
                        <move automap="true">
                            <input path="$Data1/propertyType"/>
                            <output path="PROPERTYTYPE"/>
                        </move>
                        <move automap="true">
                            <input path="$Data1/legacyId"/>
                            <output path="LEGACYID"/>
                        </move>
                        <move automap="true">
                            <input path="$Data1/searchableAmenities"/>
                            <output path="SEARCHABLEAMENITIES"/>
                        </move>
                        <function ref="fn:string-join">
                            <input path="$Data1/amenities/Item" var="Item2"/>
                            <output path="AMENITIES"/>
                            <param name="strings" value="$Item2"/>
                            <param name="separator" value="';'"/>
                        </function>
                        <function ref="fn:string-join">
                            <input path="$Data1/usableAreas/Item" var="Item3"/>
                            <output path="USABLEAREAS"/>
                            <param name="strings" value="$Item3"/>
                            <param name="separator" value="';'"/>
                        </function>
                        <function ref="fn:string-join">
                            <input path="$Data1/unitTypes/Item" var="Item4"/>
                            <output path="UNITTYPES"/>
                            <param name="strings" value="$Item4"/>
                            <param name="separator" value="';'"/>
                        </function>
                        <function ref="fn:string-join">
                            <input path="$Data1/parkingSpaces/Item" var="Item5"/>
                            <output path="PARKINGSPACES"/>
                            <param name="strings" value="$Item5"/>
                            <param name="separator" value="';'"/>
                        </function>
                        <function ref="fn:string-join">
                            <input path="$Data1/suites/Item" var="Item6"/>
                            <output path="SUITES"/>
                            <param name="strings" value="$Item6"/>
                            <param name="separator" value="';'"/>
                        </function>
                        <function ref="fn:string-join">
                            <input path="$Data1/bathrooms/Item" var="Item7"/>
                            <output path="BATHROOMS"/>
                            <param name="strings" value="$Item7"/>
                            <param name="separator" value="';'"/>
                        </function>
                        <function ref="fn:string-join">
                            <input path="$Data1/usageTypes/Item" var="Item8"/>
                            <output path="USAGETYPES"/>
                            <param name="strings" value="$Item8"/>
                            <param name="separator" value="';'"/>
                        </function>
                        <function ref="fn:string-join">
                            <input path="$Data1/bedrooms/Item" var="Item9"/>
                            <output path="BEDROOMS"/>
                            <param name="strings" value="$Item9"/>
                            <param name="separator" value="';'"/>
                        </function>
                        <function ref="fn:string-join">
                            <input path="$Data1/floors/Item" var="Item10"/>
                            <output path="FLOORS"/>
                            <param name="strings" value="$Item10"/>
                            <param name="separator" value="';'"/>
                        </function>
                        <function ref="fn:string-join">
                            <input path="$Data1/unitSubTypes/Item" var="Item11"/>
                            <output path="UNITSUBTYPES"/>
                            <param name="strings" value="$Item11"/>
                            <param name="separator" value="';'"/>
                        </function>
                        <function ref="fn:string-join">
                            <input path="$Data1/ceilingHeight/Item" var="Item12"/>
                            <output path="CEILINGHEIGHT"/>
                            <param name="strings" value="$Item12"/>
                            <param name="separator" value="';'"/>
                        </function>
                        <function ref="fn:string-join">
                            <input path="$Data1/stamps/Item" var="Item13"/>
                            <output path="STAMPS"/>
                            <param name="strings" value="$Item13"/>
                            <param name="separator" value="';'"/>
                        </function>
                        <function ref="fn:string-join">
                            <input path="$Data1/totalAreas/Item" var="Item14"/>
                            <output path="TOTALAREAS"/>
                            <param name="strings" value="$Item14"/>
                            <param name="separator" value="';'"/>
                        </function>
                        <function ref="fn:string-join">
                            <input path="$Data1/capacityLimit/Item" var="Item15"/>
                            <output path="CAPACITYLIMIT"/>
                            <param name="strings" value="$Item15"/>
                            <param name="separator" value="';'"/>
                        </function>
                        <customFunction lang="esql" ref="MappingUtils:stringToTimestamp">
                            <input path="$Data1/createdAt" var="createdAt"/>
                            <output path="CREATEDAT"/>
                            <param name="source" value="$createdAt"/>
                        </customFunction>
                        <customFunction lang="esql" ref="MappingUtils:stringToTimestamp">
                            <input path="$Data1/updatedAt" var="updatedAt"/>
                            <output path="UPDATEDAT"/>
                            <param name="source" value="$updatedAt"/>
                        </customFunction>
                        <move>
                            <input path="$Data1/id"/>
                            <output path="LISTINGID"/>
                        </move>
                    </insert>
                    <return>
                        <input path="$var6/DBInsertReturn"/>
                    </return>
                </transaction>
            </rdbreturn>
        </transaction>
    </mappingDeclaration>
</mappingRoot>