<?xml version="1.0" encoding="UTF-8"?><mappingRoot xmlns="http://www.ibm.com/2008/ccl/Mapping" domainID="com.ibm.msl.mapping.xml" domainIDExtension="mb" mainMap="true" targetNamespace="default" version="8.0.5.0" xmlns:map="default">
    <input path="db:database(/FREEPDB1.dbm,FREEPDB1,db:schema-tables(IVANSLA,REALESTATE))" var="FREEPDB1"/>
    <input path="db:routine(/FREEPDB1.dbm,FREEPDB1,IVANSLA,GETADDREALESTATEIDS,REALESTATEID,ADDRESSID,PRICINGINFOID,LINKID)" var="GETADDREALESTATEIDS"/>
    <input path="jar:file://!com/ibm/etools/mft/map/xsds/predefined/JsonDomainMsg.xsd" var="var6"/>
    <input derivedFrom="MB:JSON_schema_in_swagger_document" path="/vivareal-loader.yaml" var="var7"/>
    <output path="jar:file://!com/ibm/etools/mft/map/xsds/predefined/JsonDomainMsg.xsd" var="var2"/>
    <output path="db:routine(/FREEPDB1.dbm,FREEPDB1,IVANSLA,GETADDREALESTATEIDS,REALESTATEID,ADDRESSID,PRICINGINFOID,LINKID)" var="GETADDREALESTATEIDS1"/>
    <output path="db:table(/FREEPDB1.dbm,FREEPDB1,IVANSLA,PRICINGINFO)" var="PRICINGINFO1"/>
    <output path="db:table(/FREEPDB1.dbm,FREEPDB1,IVANSLA,REALESTATE_PRICINGINFO)" var="REALESTATEPRICINGINFO2"/>
    <imports>
        <import kind="esql" namespace="/MappingUtils.esql"/>
    </imports>
    <namespaces>
        <namespace kind="supplement" prefix="io" uri="http://www.ibm.com/iib/msl/json"/>
        <namespace kind="extension" prefix="MappingUtils" uri="/MappingUtils.esql"/>
    </namespaces>
    <generation engine="xquery"/>
    <mappingDeclaration name="addRealEstate_InsertPricingInfo">
        <input path="$FREEPDB1/db:select(fn:false(),ResultSet(IVANSLA/REALESTATE/ID),db:where('IVANSLA.REALESTATE.SOURCEID =  ? AND IVANSLA.REALESTATE.LISTINGID =  ?1','?1'=$MessageAssembly/io:JSON//Data/id,'?'=$MessageAssembly/io:JSON//Data/sourceId))" var="dbselect"/>
        <input namespace="http://www.ibm.com/iib/msl/json" path="$var6/mb:msg(JSON,assembly,JSON,Properties)" var="MessageAssembly">
            <cast derivedFrom="MB:JSON_operation_request" path="$MessageAssembly/JSON/Data/type('anyType')" qualifier="{http://www.ibm.com/iib/msl/json}RealEstate" ref="var7" var="anyType2"/>
        </input>
        <output namespace="http://www.ibm.com/iib/msl/json" path="$var2/mb:msg(JSON,assembly,JSON,Properties)" var="ComIbmMessageAssembly_JSON1">
            <cast derivedFrom="MB:JSON_operation_response" path="$ComIbmMessageAssembly_JSON1/JSON/Data/type('anyType')" qualifier="{http://www.ibm.com/iib/msl/json}Unresolved: {http://www.ibm.com/iib/msl/json}Unresolved: {http://www.ibm.com/iib/msl/json}object_addRealEstate_200" var="anyType1"/>
        </output>
        <output path="$PRICINGINFO1/db:insert(fn:false(),ID,YEARLYIPTU,PRICE,BUSINESSTYPE,MONTHLYCONDOFEE,CREATEDAT)" var="dbinsert5"/>
        <output path="$REALESTATEPRICINGINFO2/db:insert(fn:false(),REALESTATEID,PRICINGINFOID)" var="dbinsert7"/>
        <transaction>
            <rdbcall>
                <output path="$GETADDREALESTATEIDS1/db:routine-call()"/>
            </rdbcall>
            <rdbreturn>
                <input path="$GETADDREALESTATEIDS/db:routine-return(fn:false(),fn:nilled(),0,1,2,3)" var="dbroutinereturn"/>
                <input path="$dbselect/ResultSet[1]/IVANSLA/REALESTATE/ID" var="ID"/>
                <input path="$MessageAssembly/JSON/spath('Data',2)/pricingInfos/Item[1]" var="Item"/>
                <input path="$MessageAssembly/JSON/spath('Data',2)/updatedAt" var="updatedAt1"/>
                <output path="$dbinsert5/." var="dbinsert6"/>
                <output path="$dbinsert7/." var="dbinsert8"/>
                <move>
                    <input path="$dbroutinereturn/PRICINGINFOID"/>
                    <output path="$dbinsert6/ID"/>
                </move>
                <move>
                    <input path="$dbroutinereturn/PRICINGINFOID"/>
                    <output path="$dbinsert8/PRICINGINFOID"/>
                </move>
                <move>
                    <input path="$ID/."/>
                    <output path="$dbinsert8/REALESTATEID"/>
                </move>
                <move>
                    <input path="$Item/price"/>
                    <output path="$dbinsert6/PRICE"/>
                </move>
                <move>
                    <input path="$Item/yearlyIptu"/>
                    <output path="$dbinsert6/YEARLYIPTU"/>
                </move>
                <move>
                    <input path="$Item/businessType"/>
                    <output path="$dbinsert6/BUSINESSTYPE"/>
                </move>
                <move>
                    <input path="$Item/monthlyCondoFee"/>
                    <output path="$dbinsert6/MONTHLYCONDOFEE"/>
                </move>
                <customFunction lang="esql" ref="MappingUtils:stringToTimestamp">
                    <input path="$updatedAt1/." var="updatedAt"/>
                    <output path="$dbinsert6/CREATEDAT"/>
                    <param name="source" value="$updatedAt"/>
                </customFunction>
            </rdbreturn>
        </transaction>
        <move>
            <input path="$MessageAssembly/Properties"/>
            <output path="$ComIbmMessageAssembly_JSON1/Properties"/>
        </move>
    </mappingDeclaration>
</mappingRoot>